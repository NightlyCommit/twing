const Twing = require('../../../lib/twing');
const tap = require('tap');

tap.test('Twing library', function (test) {
    let expected = ['abs',
        'asort',
        'chunk',
        'clone',
        'compare',
        'compareToArray',
        'compareToNumber',
        'compareToString',
        'compareToBoolean',
        'compareToDateTime',
        'compareToNull',
        'count',
        'each',
        'fill',
        'first',
        'formatDuration',
        'formatDateTime',
        'iconv',
        'includes',
        'isCountable',
        'isTraversable',
        'iteratorToArray',
        'iteratorToHash',
        'iteratorToMap',
        'join',
        'jsonEncode',
        'ksort',
        'max',
        'merge',
        'min',
        'push',
        'range',
        'regexParser',
        'relativeDate',
        'reverse',
        'slice',
        'TwingBaseNodeVisitor',
        'TwingCacheFilesystem',
        'TwingCacheNull',
        'TwingCompiler',
        'TwingEnvironment',
        'TwingError',
        'TwingErrorLoader',
        'TwingErrorRuntime',
        'TwingErrorSyntax',
        'TwingExpressionParser',
        'TwingExtension',
        'TwingExtensionCore',
        'TwingExtensionDebug',
        'TwingExtensionEscaper',
        'TwingExtensionOptimizer',
        'TwingExtensionProfiler',
        'TwingExtensionSandbox',
        'TwingExtensionSet',
        'TwingExtensionStaging',
        'TwingExtensionStringLoader',
        'TwingFileExtensionEscapingStrategy',
        'TwingFilter',
        'TwingFunction',
        'TwingLexer',
        'TwingLoaderArray',
        'TwingLoaderChain',
        'TwingLoaderFilesystem',
        'TwingMarkup',
        'TwingNode',
        'TwingNodeAutoEscape',
        'TwingNodeBlock',
        'TwingNodeBlockReference',
        'TwingNodeBody',
        'TwingNodeCheckSecurity',
        'TwingNodeDo',
        'TwingNodeEmbed',
        'TwingNodeExpression',
        'TwingNodeExpressionArray',
        'TwingNodeExpressionAssignName',
        'TwingNodeExpressionBinary',
        'TwingNodeExpressionBinaryAdd',
        'TwingNodeExpressionBinaryAnd',
        'TwingNodeExpressionBinaryBitwiseAnd',
        'TwingNodeExpressionBinaryBitwiseOr',
        'TwingNodeExpressionBinaryBitwiseXor',
        'TwingNodeExpressionBinaryConcat',
        'TwingNodeExpressionBinaryDiv',
        'TwingNodeExpressionBinaryEndsWith',
        'TwingNodeExpressionBinaryEqual',
        'TwingNodeExpressionBinaryFloorDiv',
        'TwingNodeExpressionBinaryGreater',
        'TwingNodeExpressionBinaryGreaterEqual',
        'TwingNodeExpressionBinaryIn',
        'TwingNodeExpressionBinaryLess',
        'TwingNodeExpressionBinaryLessEqual',
        'TwingNodeExpressionBinaryMatches',
        'TwingNodeExpressionBinaryMod',
        'TwingNodeExpressionBinaryMul',
        'TwingNodeExpressionBinaryNotEqual',
        'TwingNodeExpressionBinaryNotIn',
        'TwingNodeExpressionBinaryOr',
        'TwingNodeExpressionBinaryPower',
        'TwingNodeExpressionBinaryRange',
        'TwingNodeExpressionBinaryStartsWith',
        'TwingNodeExpressionBinarySub',
        'TwingNodeExpressionBlockReference',
        'TwingNodeExpressionCall',
        'TwingNodeExpressionConditional',
        'TwingNodeExpressionConstant',
        'TwingNodeExpressionFilter',
        'TwingNodeExpressionFilterDefault',
        'TwingNodeExpressionFunction',
        'TwingNodeExpressionGetAttr',
        'TwingNodeExpressionHash',
        'TwingNodeExpressionMethodCall',
        'TwingNodeExpressionName',
        'TwingNodeExpressionNullCoalesce',
        'TwingNodeExpressionParent',
        'TwingNodeExpressionTest',
        'TwingNodeExpressionTestConstant',
        'TwingNodeExpressionTestDefined',
        'TwingNodeExpressionTestDivisibleBy',
        'TwingNodeExpressionTestEven',
        'TwingNodeExpressionTestNull',
        'TwingNodeExpressionTestOdd',
        'TwingNodeExpressionTestSameAs',
        'TwingNodeExpressionUnary',
        'TwingNodeExpressionUnaryNeg',
        'TwingNodeExpressionUnaryNot',
        'TwingNodeExpressionUnaryPos',
        'TwingNodeFlush',
        'TwingNodeFor',
        'TwingNodeForLoop',
        'TwingNodeIf',
        'TwingNodeImport',
        'TwingNodeInclude',
        'TwingNodeMacro',
        'TwingNodeModule',
        'TwingNodePrint',
        'TwingNodeSandbox',
        'TwingNodeSandboxedPrint',
        'TwingNodeSet',
        'TwingNodeSpaceless',
        'TwingNodeText',
        'TwingNodeTraverser',
        'TwingNodeType',
        'TwingNodeVisitorEscaper',
        'TwingNodeVisitorOptimizer',
        'TwingNodeVisitorSafeAnalysis',
        'TwingNodeVisitorSandbox',
        'TwingNodeWith',
        'TwingOutputBuffering',
        'TwingOutputHandler',
        'TwingParser',
        'TwingProfilerDumperBase',
        'TwingProfilerDumperBlackfire',
        'TwingProfilerDumperHtml',
        'TwingProfilerDumperText',
        'TwingProfilerNodeEnterProfile',
        'TwingProfilerNodeLeaveProfile',
        'TwingProfilerNodeVisitorProfiler',
        'TwingProfilerProfile',
        'TwingReflectionMethod',
        'TwingReflectionParameter',
        'TwingSandboxSecurityError',
        'TwingSandboxSecurityNotAllowedFilterError',
        'TwingSandboxSecurityNotAllowedFunctionError',
        'TwingSandboxSecurityNotAllowedTagError',
        'TwingSandboxSecurityPolicy',
        'TwingSource',
        'TwingTemplate',
        'TwingTemplateWrapper',
        'TwingTest',
        'TwingTokenParser',
        'TwingTokenParserAutoEscape',
        'TwingTokenParserBlock',
        'TwingTokenParserDo',
        'TwingTokenParserEmbed',
        'TwingTokenParserExtends',
        'TwingTokenParserFilter',
        'TwingTokenParserFlush',
        'TwingTokenParserFor',
        'TwingTokenParserFrom',
        'TwingTokenParserIf',
        'TwingTokenParserImport',
        'TwingTokenParserInclude',
        'TwingTokenParserMacro',
        'TwingTokenParserSandbox',
        'TwingTokenParserSet',
        'TwingTokenParserSpaceless',
        'TwingTokenParserUse',
        'TwingTokenParserWith',
        'TwingTokenStream',
        'varDump'
    ];

    for (let key of expected) {
        test.true(Twing[key], `${key} is exported`);
    }

    for (let key in Twing) {
        test.true(expected.includes(key), `${key} is legit`);
    }


    test.end();
});